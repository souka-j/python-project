{% extends 'tickets/base.html' %}

{% block title %}Confirmation d'achat - Tickets-Can{% endblock %}

{% block content %}
<div class="card" style="text-align: center; max-width: 800px; margin: 0 auto;">
    <!-- Animation de succÃ¨s -->
    <div style="font-size: 5rem; color: #28a745; margin-bottom: 1rem;">
        ğŸ‰ âœ…
    </div>
    
    <h1 style="margin: 1rem 0; color: #1e3c72;">Achat confirmÃ© avec succÃ¨s !</h1>
    <p style="color: #666; margin-bottom: 2rem;">Votre ticket a Ã©tÃ© rÃ©servÃ©. Vous recevrez un email de confirmation.</p>
    
    <!-- RÃ©sumÃ© du ticket -->
    <div style="background: #f8f9fa; padding: 2rem; border-radius: 8px; margin: 2rem 0; text-align: left;">
        <h2 style="color: #1e3c72; margin-bottom: 1rem; border-bottom: 2px solid #dee2e6; padding-bottom: 0.5rem;">
            ğŸ“‹ DÃ©tails de votre rÃ©servation
        </h2>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
            <div>
                <p><strong>ğŸ« ID du ticket :</strong></p>
                <p style="font-size: 1.2rem; font-weight: bold; color: #2a5298;">{{ ticket.uuid|slice:":8"|upper }}</p>
            </div>
            <div>
                <p><strong>ğŸ† Ã‰vÃ©nement :</strong></p>
                <p>{{ ticket.event.name }}</p>
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
            <div>
                <p><strong>ğŸ‘¤ Nom complet :</strong></p>
                <p>{{ ticket.first_name }} {{ ticket.last_name }}</p>
            </div>
            <div>
                <p><strong>ğŸ“… Date de naissance :</strong></p>
                <p>{{ ticket.birth_date|date:"d/m/Y" }}</p>
            </div>
        </div>
        
        {% if ticket.cin %}
        <div style="margin-bottom: 1.5rem;">
            <p><strong>ğŸ†” CIN :</strong> {{ ticket.cin }}</p>
        </div>
        {% endif %}
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
            <div>
                <p><strong>ğŸŸï¸ Type de ticket :</strong></p>
                <p>{{ ticket.get_ticket_type_display }}</p>
            </div>
            <div>
                <p><strong>ğŸ‘¥ CatÃ©gorie :</strong></p>
                <p>{{ ticket.get_age_category_display }}</p>
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
            <div>
                <p><strong>ğŸŸï¸ Section :</strong></p>
                <p>{{ ticket.get_stadium_section_display }}</p>
            </div>
            <div>
                <p><strong>ğŸ’º SiÃ¨ge :</strong></p>
                <p>{{ ticket.seat_number }}</p>
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
            <div>
                <p><strong>ğŸ’° Prix total :</strong></p>
                <p style="font-size: 1.3rem; font-weight: bold; color: #28a745;">{{ ticket.price }} MAD</p>
            </div>
            <div>
                <p><strong>ğŸ’³ Moyen de paiement :</strong></p>
                <p>{{ ticket.get_payment_method_display }}</p>
            </div>
        </div>
        
        {% if ticket.additional_members > 0 %}
        <div style="margin-bottom: 1.5rem; padding: 1rem; background: #e8f4fd; border-radius: 6px;">
            <p><strong>ğŸ‘¥ Membres supplÃ©mentaires :</strong> {{ ticket.additional_members }} personne(s)</p>
            {% if ticket.additional_members_names %}
            <p><strong>ğŸ“ Noms :</strong> {{ ticket.additional_members_names }}</p>
            {% endif %}
        </div>
        {% endif %}
        
        <!-- Code QR (placeholder) -->
        <div style="text-align: center; margin: 2rem 0; padding: 1rem; border: 2px dashed #dee2e6; border-radius: 8px;">
            <p style="font-weight: bold; margin-bottom: 1rem;">ğŸ“± Code QR pour l'entrÃ©e</p>
            <div style="background: white; padding: 1rem; display: inline-block; border-radius: 8px;">
                <p style="font-family: monospace; font-size: 1.2rem;">QR CODE</p>
                <p style="font-size: 0.9rem; color: #666;">(Ã€ scanner Ã  l'entrÃ©e du stade)</p>
            </div>
        </div>
    </div>
    
    <!-- Instructions importantes -->
    <div style="background: #d4edda; color: #155724; padding: 1.5rem; border-radius: 8px; margin: 1rem 0; text-align: left;">
        <h3 style="margin-bottom: 1rem;">ğŸ“‹ Instructions importantes :</h3>
        <ol style="margin-left: 1.5rem;">
            <li>PrÃ©sentez ce ticket et votre <strong>CIN</strong> Ã  l'entrÃ©e du stade</li>
            <li>Arrivez au moins <strong>1 heure avant</strong> le dÃ©but du match</li>
            <li>Gardez ce ticket en sÃ©curitÃ© jusqu'au jour du match</li>
            <li>Pour les -18 ans : Ãªtre accompagnÃ© d'un adulte</li>
            <li>En cas de problÃ¨me, contactez le support au <strong>+212 6 XX XX XX XX</strong></li>
        </ol>
    </div>
    
    <!-- Boutons d'action -->
    <div style="display: flex; justify-content: center; gap: 1rem; margin-top: 2rem; flex-wrap: wrap;">
        <a href="{% url 'event_list' %}" class="btn" style="background: #1e3c72;">
            ğŸ† Voir d'autres matchs
        </a>
        <a href="{% url 'my_tickets' %}" class="btn" style="background: #6c757d;">
            ğŸ« Mes tickets
        </a>
        <button onclick="window.print()" class="btn" style="background: #17a2b8;">
            ğŸ–¨ï¸ Imprimer le ticket
        </button>
    </div>
    
    <!-- Message de confirmation -->
    <div style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
        <p>Un email de confirmation a Ã©tÃ© envoyÃ© Ã  votre adresse email.</p>
        <p style="font-size: 0.9rem; color: #666;">Merci d'avoir choisi <strong>Tickets-Can</strong> !</p>
    </div>
</div>
{% endblock %}
